### FAQ

#### 這個軟件和Youtbe-dl比，有什麼特點，或者說用戶為什麼要用它？

1.  youtbe-dl是一個非常優秀的軟件，但它本身只是一個不帶GUI的軟件，所以對於普通用戶還是需要額外安裝一個GUI界面的附加軟件才方便使用。
2.  本軟件帶了一個完整的GUI操作界面，方便管理視頻，同時也可以直接生成Youtube-dl下載的指令。
3.  youtbe-dl使用python語言開發，我期望將門檻更加降低，直接在瀏覽器里通過執行JS的方式，這樣可以更加降低門檻。

#### 為什麼無法更新某些視頻信息？

1.  有些視頻的頁面可能是存在問題的，比如網站刪除了它，或者別的原因，對於程序來說，確實無能為力。
2.  有時候，因為更新視頻的速度過於頻繁，可能會被網站暫停訪問，在這種情況下，可以再等24小時，同時打開對應的站點解析器，把間隔時間適當調長。
3.  一般來說，如果被網站暫停訪問，程序會盡量發現這種情況，並嘗試給出提示，可以多關註一下提示信息。

#### 為什麼有些視頻無法下載？

通常無法下載的視頻，都會有錯誤提示，可以關註一下提示信息。主要有以下幾種可能：

1.  如果在首選項中指定了相應的分辨率，那麼如果某個視頻沒有該分辨率，那麼就不會下載。針對這種問題，可以試著允許下載更多的分辨率（默認只打開了720P和1080P這兩種常見格式）。
2.  某些網站視頻的鏈接會失效，那麼這種情況下，即使程序內部會自動嘗試多個源，也確實沒有辦法下載。
3.  某些視頻網站可能會有更嚴格的手段防止下載。如果你碰到這種情況，[可以點擊這裡提交反饋](https://github.com/aquariusStudio/cicada/issues)，我會嘗試解決。

#### 為什麼需要ffmpeg？

1.  很多網站是使用了HLS（或者說M3U8）的流媒體解決方案，因此真正下載得到的是數以千計的小文件，需要將這些文件轉成相應的媒體文件，轉換時就需要用到ffmpeg。
2.  ffmpeg也可以用來下載HLS流媒體並生成單獨的文件。
3.  你可以訪問 [ffmpeg的官方網站](http://www.ffmpeg.org/) 獲得相應的版本。

#### 為什麼有些視頻下載後無法觀看？

1.  首先檢查你的電腦或者手機是否能夠正常播放各種本地媒體，如果確信可以，煩請在線查看該視頻是否能正常播放（很多視頻網站的視頻也是會失效或者變成僅會員可看）。
2.  有可能在下載過程中出現了部分錯誤的內容，刪除該視頻後，嘗試重新下載，看是否可以播放。
3.  因為HLS協議比較複雜，我也並不太熟悉流媒體方面的內容，所以對於某些HLS協議的流媒體，可能無法正確下載，後續會努力解決這個問題。可以通過生成外部鏈接的方式，使用其它軟件下載（如N\_m3u8DL和ffmpeg均可下載HLS媒體文件，可以訪問 [N\_m3u8DL](https://github.com/nilaoda/N_m3u8DL-CLI)的官方網站，獲得相應的版本）。
4.  如果以上方式均不能播放，則可以試著使用生成下載鏈接的方式，用外部下載工具下載該視頻，看是否可以播放。如果通過這種方式解決了問題，[可以點擊這裡提交反饋](https://github.com/aquariusStudio/cicada/issues)，我會嘗試解決。

#### 為什麼有些鏈接複製出來後，卻無法在瀏覽器裡訪問或者使用其它軟件下載？

1.  很多視頻網站為了廣告或者點擊數等原因，會對鏈接進行動態化，超過一定時間後，或者非指定IP訪問，這個鏈接就會變得無效。
2.  某些網站，下載時是用了做了很多的檢查，比如請求中所帶的Referer一定要是指定來源才可以。這種情況下，只有Aria2是支持指定Referer的，可以嘗試生成Aria2的鏈接，並使用Aria2進行下載。
3.  因為受限於個人技術水平，使用Java的ssl證書訪問某些網站時，得到的鏈接是專用的，無法在瀏覽器或者別的下載軟件中使用。針對這種情況，可以試著用生成下載鏈接列表的方式（此時會調用瀏覽器的SSL訪問來生成動態鏈接，保證可用）。

#### 除了使用JS進行擴展外，是否還有其它的擴展方案？

1.  是可以使用Groovy的，但考慮到開發和測試的工作量，還沒有加上去，如果有大量需求，後續會加入Groovy的支持。

#### 機器配置較好的情況下，為什麼有時候有卡的感覺？

1.  如果你打開了後台自動刷新視頻列表和視頻信息的功能的話，有可能因為後台刷新（瀏覽器也是在UI線程中運行的），而帶來一些卡的感覺。針對這種情況，你可以考慮只打開自動刷新視頻列表，同時關閉自動刷新視頻信息功能，這樣只會在啟動後的少量時間裡佔用資源，缺點就是視頻信息不全，不便於搜索。你也可以考慮專門讓軟件在空閒時間裡自動或者手動刷新完歷史數據後，再打開自動刷新視頻功能，這樣對於一般每天只增加幾十或者上百個視頻的網站來說，刷新速度非常快，就不會帶來性能問題了。

#### 為什麼有時候會彈出一些瀏覽器廣告窗口？

1.  Windows下請打開Internet選項，在"隱私"標籤處，將"啟用彈出窗口阻止程序"選中，然後並通過"設置"按鈕，在彈出窗口中將"攔截級別"設置為"高"，可以基本攔住絕大多數的彈出窗口。
2.  經過上面的設置，正常情況下是不會彈出廣告窗口了，但很多視頻網站包含了大量的廣告，儘管程序已經努力的攔截這些廣告防止彈出窗口，但還是無法完全避免，如果出現這種情況，可以直接關閉窗口即可。如果特別頻繁，可以考慮放棄這個視頻網站，或者[可以點擊這裡提交反饋](https://github.com/aquariusStudio/cicada/issues)，我會嘗試解決。

#### 為什麼有時候會彈出一些瀏覽器警告窗口？

1.  Windows下請打開Internet選項，在"高級"標籤窗口裡，安全的子項有一條"對證書地址不匹配"取消選中即可。
2.  有時候有些網頁會同時包含https和http內容，對於IE瀏覽器，需要在安全中把當前使用的安全模式自行定義，其中有一項"混合模式"，請選擇"啟用"，如果確認訪問信息的頁面不需要混用，那麼也可以嘗試"禁用"，但請不要選擇默認的"提示"，這會導致不停的彈出對話框。

#### 使用的瀏覽器具體是什麼內核，編寫JS時的兼容性？

1.  軟件支持兩個瀏覽器內核，分別是用來作為展示用的由SWT提供的默認瀏覽器（Windows平台上是IE，Linux平台上是Webkit）和基於Chromium內核的EdgeWebView2（僅在Windows上可用，且需要安裝WebView2的運行庫，[點擊這裡下載並安裝WebView2的運行庫](https://developer.microsoft.com/microsoft-edge/webview2/)）。
2.  正常情況下，是使用SWT提供的默認瀏覽展示視頻列表，以及解析網頁和執行JS。
3.  正常情況下，不建議使用基於Chromium內核的EdgeWebView2，一是需要額外安裝軟件，二是EdgeWebView2佔用的資源太多（初步估計，需要比默認瀏覽器要多佔用1-2G內存）。
4.  如果一定要使用EdgeWebView2，比如Youtube就已經不再支持IE12，那麼在首選項中設置即可（設置完成後，建議重新啟動程序）。 
5.  即使啟用EdgeWebView2，也仍然會使用默認瀏覽器內核來展示視頻列表，這是因為Eclipse目前對EdgeWebView2的支持還不完善，比如在無法在Edge瀏覽器注入菜單。
6.  如果一定想用Edge展示視頻列表，可以通過命令行"cicada -vmargs -Dorg.eclipse.swt.browser.DefaultType=edge"來啟動Cicada，強行使用EdgeWebView2作為默認瀏覽器。
7.  編寫JS時，還是盡量考慮IE/Webkit/Chromium的兼容性。

#### EdgeWebView2能使用Chrome的擴展嗎？

1.  在Windows平台上，儘管WebView2啟動程序的名字叫"msedgewebview2.exe"，但它並不是Edge，目前微軟官方的說法是不支持擴展。
2.  未來如果有一天，它支持了Chrome或者Edge自己的擴展，按照過去的經驗來看，直接訪問[Edge的官方擴展站點](https://microsoftedge.microsoft.com/addons/Microsoft-Edge-Extensions-Home)或者[Chrome的官方擴展站點](https://chrome.google.com/webstore/category/extensions)，進行安裝即可。

#### 需要使用什麼版本的JRE？

1.  目前在幾個主要的大版本里測試過，比如JDK8，JDK11和JDK17。
2.  但如果想使用Edge瀏覽器，就必須使用JDK11和JDK17，因為Eclipse在4.19版本以上才支持Edge，而4.19需要JDK11以上版本。
3.  如果受限於JDK8，那麼也可以使用Eclipse4.9版本，所以也就無法使用Edge瀏覽器，會導致部分網站可能無法正確支持，如Youtube。

#### 為什麼要使用Java？

1.  我個人用Java更多，而且也比較好跨平台。
2.  使用SWT，是因為Swing或者Javafx都無法提供一個方便易用，而且有較好兼容性的瀏覽器組件。
3.  測試過selenium，但如果多線程訪問時，需要打開多個實例，太佔用資源，且不好共享Session。雖然支持Tab，但無法多線程訪問，不易使用。
4.  試過Qt帶的瀏覽器引擎（基於Webkit），兼容性不好，很多網站的可用情況甚至還不如IE。
5.  CEF是一個基於Chromium的跨平台方案，但兼容性也很差，驗證過程中出現過多次崩潰的情況。
6.  C#無法跨平台，而且默認也是使用IE，如果使用WebView2，仍然非常佔用資源。

#### 配置改錯了，怎麼辦？

1.  首選項的每一個設置裡都有一個"恢復默認值"的功能，點擊即可恢復初始值。

#### 為什麼有些網站，在瀏覽器裡查看時，有圖片，但在屬性視圖裡卻不顯示正常圖片？

1.  因為某些網站可能使用了特殊格式的圖片，而Java還沒能正式支持這種格式的圖片，所以只能通過瀏覽器顯示，在視圖裡則無法顯示。
2.  已經支持了Webp等多種常見格式，如果還有這種情況，可以把地址發出來，加以修正。

#### 如何使用代理？

1.  很抱歉，目前還不支持正式支持代理，因為涉及到Java程序，SWT自帶的瀏覽器以及Edge瀏覽器，單獨的Java程序很難正確的同時為這三者都正確的設置代理服務器（涉及到系統權限等問題），後續會嘗試解決這個問題。
2.  如果確有這類需求，提供一個臨時方案，首先是通過命令行"cicada -vmargs -Duser.language=en -Dhttp.proxyHost=127.0.0.1 -Dhttp.proxyPort=1080 -Dhttps.proxyHost=127.0.0.1 -Dhttps.proxyPort=1080"來啟動Cicada，請把示例中的"127.0.01"和"1080"換成真實的代理器地址和端口，這樣可以讓Java程序使用代理服務器。最後再在系統裡找到IE或者Webkit的配置（如果使用Edge，還需要修改Edge），使用與上面相同的代理服務器即可。

#### 為什麼有時程序無法正常關閉，或者說關閉後仍然在後台運行？

1.  目前發現是Edge和SWT的整合中存在一個Bug，即如果在執行JS腳本時關閉瀏覽器，有可能會導致死鎖（早先Eclipse4.17也支持了CEF，同樣存在該問題，所以SWT已經在後續不再支持Chromium了）。作者已經盡力去避免這種死鎖了，但可能這塊還有潛在的問題，仍然有少數情況下會出現。
2.  如果經常出現此類情況，可以考慮禁用Edge（部分網站可能不支持IE，所以部分視頻網站可能無法正常使用）。
3.  如果退出後，發現"cicada"進程還在長期運行中（幾分鐘），建議殺掉該進程。

#### 瀏覽器展示的界面不太好用，是否可以定制？

很抱歉，作為一個程序員，我對HTML+JS的前端極其不熟悉，所以允許任何熟悉前端的程序員，都可以試著修改Cicada目錄下Workspace/config/site目錄下的內容來定制顯示界面。 [詳細的指導文檔參見這裡。 ](siteDefine.html)

#### 為什麼設置了多線程下載，但下載時還是只使用了一個或者兩個線程？

1.  在下載時，會將文件進行分段，如果一個下載段的大小就超過了整個文件的長度，則只會使用一個線程下載。比如下載段的大小默認值為200M，如果待下載的文件只有100M，程序則只會啟用一個線程。如果想使用更多線程，可以將下載段設置為50M甚至更少，但並不推薦這麼做。
2.  程序在下載時，如果發現某些網站不允許多線程下載，會自動轉為單線程。

#### 如何切換界面語言？

目前提供了四種語言（簡體中文，繁體中文，英文，日文），默認使用當前系統的語言，如果當前系統的語言不在這四種語言中，則會使用英文。如果想指定具體的語言，可以通過命令行"cicada -vmargs -Duser.language=en"來啟動Cicada，其中"-Duser.language=en"指定語言為英文。簡體中文對應的編碼是"zh\_CN"，繁體中文對應的編碼是"zh\_TW"，英文對應的編碼是"en"，日文對應的編碼是"ja"。

#### 如何備份數據？

目前所有的數據，都是默認保存在程序的Workspace目錄裡。只需要復制整個目錄，即可完成備份，恢復也是如此。

#### 為什麼只出現了瀏覽器，沒有表格？

1.  表格是使用了NatTable，如果沒有正確安裝的話，只會展示瀏覽器。
2.  默認版本是帶了NatTable的，如果是自己打包，請確認要帶上NatTable。

#### 如何更新腳本？

1.  如果從社區或者其它來源，拿到了他人開發的腳本，那麼只需要找到程序的Workspace目錄中的parser目錄，根據相應的站點名稱，新建目錄，將相應的文件放置進去，請保證結構與其它目錄類似即可。
2.  複製完成後，重新啟動Cicada即可。

#### 如何安裝最新版本？

1.  直接在官方網站下載最新的版本。
2.  可以在原來的目錄下，將除Workspace目錄以外的內容刪除後，解壓縮後即可。

#### Linux有些功能無效，如雙擊或者刪除文件？

1.  這可能是因為安裝的JDK沒有足夠的權限，建議使用sudo來安裝JDK，保證其權限。

#### 為什麼沒有提供自動升級功能？

1.  主要是精力有限，如果後續用戶增加，我再加入這個功能。

#### 為什麼沒有提供Mac版本？

1.  因為我個人沒有Mac筆記本，所以沒有辦法測試。
2.  如果有哪位朋友有興趣提供Mac版本，可以和我聯繫 [aquarius.github@gmail.com](mailto:aquarius.github@gmail.com) 。
