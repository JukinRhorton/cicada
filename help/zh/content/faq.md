### FAQ

#### 这个软件和Youtbe-dl比，有什么特点，或者说用户为什么要用它？

1.  youtbe-dl是一个非常优秀的软件，但它本身只是一个不带GUI的软件，所以对于普通用户还是需要额外安装一个GUI界面的附加软件才方便使用。
2.  本软件带了一个完整的GUI操作界面，方便管理视频，同时也可以直接生成Youtube-dl下载的指令。
3.  youtbe-dl使用python语言开发，我期望将门槛更加降低，直接在浏览器里通过执行JS的方式，这样可以更加降低门槛。

#### 为什么无法更新某些视频信息？

1.  有些视频的页面可能是存在问题的，比如网站删除了它，或者别的原因，对于程序来说，确实无能为力。
2.  有时候，因为更新视频的速度过于频繁，可能会被网站暂停访问，在这种情况下，可以再等24小时，同时打开对应的站点解析器，把间隔时间适当调长。
3.  一般来说，如果被网站暂停访问，程序会尽量发现这种情况，并尝试给出提示，可以多关注一下提示信息。

#### 为什么有些视频无法下载？

通常无法下载的视频，都会有错误提示，可以关注一下提示信息。主要有以下几种可能：

1.  如果在首选项中指定了相应的分辨率，那么如果某个视频没有该分辨率，那么就不会下载。针对这种问题，可以试着允许下载更多的分辨率（默认只打开了720P和1080P这两种常见格式）。
2.  某些网站视频的链接会失效，那么这种情况下，即使程序内部会自动尝试多个源，也确实没有办法下载。
3.  某些视频网站可能会有更严格的手段防止下载。如果你碰到这种情况，[可以点击这里提交反馈](https://github.com/aquariusStudio/cicada/issues)，我会尝试解决。

#### 为什么需要ffmpeg？

1.  很多网站是使用了HLS（或者说M3U8）的流媒体解决方案，因此真正下载得到的是数以千计的小文件，需要将这些文件转成相应的媒体文件，转换时就需要用到ffmpeg。
2.  ffmpeg也可以用来下载HLS流媒体并生成单独的文件。
3.  你可以访问 [ffmpeg的官方网站](http://www.ffmpeg.org/) 获得相应的版本。

#### 为什么有些视频下载后无法观看？

1.  首先检查你的电脑或者手机是否能够正常播放各种本地媒体，如果确信可以，烦请在线查看该视频是否能正常播放（很多视频网站的视频也是会失效或者变成仅会员可看）。
2.  有可能在下载过程中出现了部分错误的内容，删除该视频后，尝试重新下载，看是否可以播放。
3.  因为HLS协议比较复杂，我也并不太熟悉流媒体方面的内容，所以对于某些HLS协议的流媒体，可能无法正确下载，后续会努力解决这个问题。可以通过生成外部链接的方式，使用其它软件下载（如N\_m3u8DL和ffmpeg均可下载HLS媒体文件，可以访问 [N\_m3u8DL](https://github.com/nilaoda/N_m3u8DL-CLI)的官方网站，获得相应的版本）。
4.  如果以上方式均不能播放，则可以试着使用生成下载链接的方式，用外部下载工具下载该视频，看是否可以播放。如果通过这种方式解决了问题，[可以点击这里提交反馈](https://github.com/aquariusStudio/cicada/issues)，我会尝试解决。

#### 为什么有些链接复制出来后，却无法在浏览器里访问或者使用其它软件下载？

1.  很多视频网站为了广告或者点击数等原因，会对链接进行动态化，超过一定时间后，或者非指定IP访问，这个链接就会变得无效。
2.  某些网站，下载时是用了做了很多的检查，比如请求中所带的Referer一定要是指定来源才可以。这种情况下，只有Aria2是支持指定Referer的，可以尝试生成Aria2的链接，并使用Aria2进行下载。
3.  因为受限于个人技术水平，使用Java的ssl证书访问某些网站时，得到的链接是专用的，无法在浏览器或者别的下载软件中使用。针对这种情况，可以试着用生成下载链接列表的方式（此时会调用浏览器的SSL访问来生成动态链接，保证可用）。

#### 除了使用JS进行扩展外，是否还有其它的扩展方案？

1.  是可以使用Groovy的，但考虑到开发和测试的工作量，还没有加上去，如果有大量需求，后续会加入Groovy的支持。

#### 机器配置较好的情况下，为什么有时候有卡的感觉？

1.  如果你打开了后台自动刷新视频列表和视频信息的功能的话，有可能因为后台刷新（浏览器也是在UI线程中运行的），而带来一些卡的感觉。针对这种情况，你可以考虑只打开自动刷新视频列表，同时关闭自动刷新视频信息功能，这样只会在启动后的少量时间里占用资源，缺点就是视频信息不全，不便于搜索。你也可以考虑专门让软件在空闲时间里自动或者手动刷新完历史数据后，再打开自动刷新视频功能，这样对于一般每天只增加几十或者上百个视频的网站来说，刷新速度非常快，就不会带来性能问题了。

#### 为什么有时候会弹出一些浏览器广告窗口？

1.  Windows下请打开Internet选项，在"隐私"标签处，将"启用弹出窗口阻止程序"选中，然后并通过"设置"按钮，在弹出窗口中将"拦截级别"设置为"高"，可以基本拦住绝大多数的弹出窗口。
2.  经过上面的设置，正常情况下是不会弹出广告窗口了，但很多视频网站包含了大量的广告，尽管程序已经努力的拦截这些广告防止弹出窗口，但还是无法完全避免，如果出现这种情况，可以直接关闭窗口即可。如果特别频繁，可以考虑放弃这个视频网站，或者[可以点击这里提交反馈](https://github.com/aquariusStudio/cicada/issues)，我会尝试解决。

#### 为什么有时候会弹出一些浏览器警告窗口？

1.  Windows下请打开Internet选项，在"高级"标签窗口里，安全的子项有一条"对证书地址不匹配"取消选中即可。
2.  有时候有些网页会同时包含https和http内容，对于IE浏览器，需要在安全中把当前使用的安全模式自行定义，其中有一项"混合模式"，请选择"启用"，如果确认访问信息的页面不需要混用，那么也可以尝试"禁用"，但请不要选择默认的"提示"，这会导致不停的弹出对话框。


#### 使用的浏览器具体是什么内核，编写JS时的兼容性？

1.  软件支持两个浏览器内核，分别是用来作为展示用的由SWT提供的默认浏览器（Windows平台上是IE，Linux平台上是Webkit）和基于Chromium内核的EdgeWebView2（仅在Windows上可用，且需要安装WebView2的运行库，[点击这里下载并安装WebView2的运行库](https://developer.microsoft.com/microsoft-edge/webview2/)）。
2.  正常情况下，是使用SWT提供的默认浏览展示视频列表，以及解析网页和执行JS。
3.  正常情况下，不建议使用基于Chromium内核的EdgeWebView2，一是需要额外安装软件，二是EdgeWebView2占用的资源太多（初步估计，需要比默认浏览器要多占用1-2G内存）。
4.  如果一定要使用EdgeWebView2，比如Youtube就已经不再支持IE12，那么在首选项中设置即可（设置完成后，建议重新启动程序）。 
5.  即使启用EdgeWebView2，也仍然会使用默认浏览器内核来展示视频列表，这是因为Eclipse目前对EdgeWebView2的支持还不完善，比如在无法在Edge浏览器注入菜单。
6.  如果一定想用Edge展示视频列表，可以通过命令行"cicada -vmargs -Dorg.eclipse.swt.browser.DefaultType=edge"来启动Cicada，强行使用EdgeWebView2作为默认浏览器。
7.  编写JS时，还是尽量考虑IE/Webkit/Chromium的兼容性。

#### EdgeWebView2能使用Chrome的扩展吗？

1.  在Windows平台上，尽管WebView2启动程序的名字叫"msedgewebview2.exe"，但它并不是Edge，目前微软官方的说法是不支持扩展。
2.  未来如果有一天，它支持了Chrome或者Edge自己的扩展，按照过去的经验来看，直接访问[Edge的官方扩展站点](https://microsoftedge.microsoft.com/addons/Microsoft-Edge-Extensions-Home)或者[Chrome的官方扩展站点](https://chrome.google.com/webstore/category/extensions)，进行安装即可。

#### 需要使用什么版本的JRE？

1.  目前在几个主要的大版本里测试过，比如JDK8，JDK11和JDK17。
2.  但如果想使用Edge浏览器，就必须使用JDK11和JDK17，因为Eclipse在4.19版本以上才支持Edge，而4.19需要JDK11以上版本。
3.  如果受限于JDK8，那么也可以使用Eclipse4.9版本，所以也就无法使用Edge浏览器，会导致部分网站可能无法正确支持，如Youtube。

#### 为什么要使用Java？

1.  我个人用Java更多，而且也比较好跨平台。
2.  使用SWT，是因为Swing或者Javafx都无法提供一个方便易用，而且有较好兼容性的浏览器组件。
3.  测试过selenium，但如果多线程访问时，需要打开多个实例，太占用资源，且不好共享Session。虽然支持Tab，但无法多线程访问，不易使用。
4.  试过Qt带的浏览器引擎（基于Webkit），兼容性不好，很多网站的可用情况甚至还不如IE。
5.  CEF是一个基于Chromium的跨平台方案，但兼容性也很差，验证过程中出现过多次崩溃的情况。
6.  C#无法跨平台，而且默认也是使用IE，如果使用WebView2，仍然非常占用资源。

#### 配置改错了，怎么办？

1.  首选项的每一个设置里都有一个"恢复默认值"的功能，点击即可恢复初始值。

#### 为什么有些网站，在浏览器里查看时，有图片，但在属性视图里却不显示正常图片？

1.  因为某些网站可能使用了特殊格式的图片，而Java还没能正式支持这种格式的图片，所以只能通过浏览器显示，在视图里则无法显示。
2.  已经支持了Webp等多种常见格式，如果还有这种情况，可以把地址发出来，加以修正。

#### 如何使用代理？

1.  很抱歉，目前还不支持正式支持代理，因为涉及到Java程序，SWT自带的浏览器以及Edge浏览器，单独的Java程序很难正确的同时为这三者都正确的设置代理服务器（涉及到系统权限等问题），后续会尝试解决这个问题。
2.  如果确有这类需求，提供一个临时方案，首先是通过命令行"cicada -vmargs -Duser.language=en -Dhttp.proxyHost=127.0.0.1 -Dhttp.proxyPort=1080 -Dhttps.proxyHost=127.0.0.1 -Dhttps.proxyPort=1080"来启动Cicada，请把示例中的"127.0.01"和"1080"换成真实的代理器地址和端口，这样可以让Java程序使用代理服务器。最后再在系统里找到IE或者Webkit的配置（如果使用Edge，还需要修改Edge），使用与上面相同的代理服务器即可。

#### 为什么有时程序无法正常关闭，或者说关闭后仍然在后台运行？

1.  目前发现是Edge和SWT的整合中存在一个Bug，即如果在执行JS脚本时关闭浏览器，有可能会导致死锁（早先Eclipse4.17也支持了CEF，同样存在该问题，所以SWT已经在后续不再支持Chromium了）。 作者已经尽力去避免这种死锁了，但可能这块还有潜在的问题，仍然有少数情况下会出现。
2.  如果经常出现此类情况，可以考虑禁用Edge（部分网站可能不支持IE，所以部分视频网站可能无法正常使用）。
3.  如果退出后，发现"cicada"进程还在长期运行中（几分钟），建议杀掉该进程。

#### 浏览器展示的界面不太好用，是否可以定制？

很抱歉，作为一个程序员，我对HTML+JS的前端极其不熟悉，所以允许任何熟悉前端的程序员，都可以试着修改Cicada目录下Workspace/config/site目录下的内容来定制显示界面。[详细的指导文档参见这里。](siteDefine.html)

#### 为什么设置了多线程下载，但下载时还是只使用了一个或者两个线程？

1.  在下载时，会将文件进行分段，如果一个下载段的大小就超过了整个文件的长度，则只会使用一个线程下载。比如下载段的大小默认值为200M，如果待下载的文件只有100M，程序则只会启用一个线程。如果想使用更多线程，可以将下载段设置为50M甚至更少，但并不推荐这么做。
2.  程序在下载时，如果发现某些网站不允许多线程下载，会自动转为单线程。

#### 如何切换界面语言？

目前提供了四种语言（简体中文，繁体中文，英文，日文），默认使用当前系统的语言，如果当前系统的语言不在这四种语言中，则会使用英文。如果想指定具体的语言，可以通过命令行"cicada -vmargs -Duser.language=en"来启动Cicada，其中"-Duser.language=en"指定语言为英文。简体中文对应的编码是"zh\_CN"，繁体中文对应的编码是"zh\_TW"，英文对应的编码是"en"，日文对应的编码是"ja"。

#### 如何备份数据？

目前所有的数据，都是默认保存在程序的Workspace目录里。只需要复制整个目录，即可完成备份，恢复也是如此。

#### 为什么只出现了浏览器，没有表格？

1.  表格是使用了NatTable，如果没有正确安装的话，只会展示浏览器。
2.  默认版本是带了NatTable的，如果是自己打包，请确认要带上NatTable。

#### 如何更新脚本？

1.  如果从社区或者其它来源，拿到了他人开发的脚本，那么只需要找到程序的Workspace目录中的parser目录，根据相应的站点名称，新建目录，将相应的文件放置进去，请保证结构与其它目录类似即可。
2.  复制完成后，重新启动Cicada即可。

#### 如何安装最新版本？

1.  直接在官方网站下载最新的版本。
2.  可以在原来的目录下，将除Workspace目录以外的内容删除后，解压缩后即可。

#### Linux有些功能无效，如双击或者删除文件？

1.  这可能是因为安装的JDK没有足够的权限，建议使用sudo来安装JDK，保证其权限。

#### 为什么没有提供自动升级功能？

1.  主要是精力有限，如果后续用户增加，我再加入这个功能。

#### 为什么没有提供Mac版本？

1.  因为我个人没有Mac笔记本，所以没有办法测试。
2.  如果有哪位朋友有兴趣提供Mac版本，可以和我联系 [aquarius.github@gmail.com](mailto:aquarius.github@gmail.com) 。
